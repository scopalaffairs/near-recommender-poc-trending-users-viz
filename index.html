<head>
  <style>
    body {
      margin: 0;
    }
  </style>

  <script src="//unpkg.com/react/umd/react.production.min.js"></script>
  <script src="//unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
  <script src="//unpkg.com/@babel/standalone"></script>

  <script src="//unpkg.com/three"></script>
  <script src="//unpkg.com/react-force-graph-3d"></script>
</head>

<body>
  <div id="graph"></div>

  <script type="importmap">
    { "imports": { "three": "https://unpkg.com/three/build/three.module.js" } }
  </script>
  <script type="text/jsx" data-type="module">
    import { UnrealBloomPass } from '//unpkg.com/three/examples/jsm/postprocessing/UnrealBloomPass.js';

    const { useRef, useEffect } = React;

    fetch('./trending_users.json').then(res => res.json()).then(data => {
      const Scene = () => {
        const obj = useRef();

        useEffect(() => {
          const bloomPass = new UnrealBloomPass();
          bloomPass.strength = 0.8;
          bloomPass.radius = 1.3;
          bloomPass.threshold = 0.2;
          obj.current.postProcessingComposer().addPass(bloomPass);
        }, []);
        
        return (
          <ForceGraph3D
            ref={obj}
            graphData={data}
            backgroundColor="#0011" 
            linkColor={() => 'rgba(200, 200, 200, 0.4)'}
            nodeLabel="id"
            nodeAutoColorBy="group"
            onNodeDragEnd={node => {
              node.fx = node.x;
              node.fy = node.y;
              node.fz = node.z;
            }}
          />
        );
      };

      ReactDOM.render(
        <Scene />,
        document.getElementById('graph')
      );
    });
  </script>
</body>